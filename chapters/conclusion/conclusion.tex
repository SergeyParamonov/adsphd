\chapter{Conclusions and Future Work}\label{ch:conclusions}
\begin{addmargin}[2em]{2em}
This chapter summarizes the thesis and discusses open problems and
future work opportunities.
\end{addmargin}

\section{Discussion and Future Work}
Let us introduce possibilities of future work here.

\subsection{Pindakaas}
If we recap the key features of FlashFill \parencite{flashfill} and of TaCLe
\parencite{tacle}, then we would highlight the following:

\textbf{FlashFill}
\begin{itemize}
\item String transformation
\item Marked input-output columns
\item Structured search over programs
\end{itemize}

\textbf{TaCLe}
\begin{itemize}
  \item Textual and numeric flat Excel formulae
  \item Unsupervised
  \item Enumerates all constraints matching the data
\end{itemize}

We see that there indeed possibilities for creating a system that
would take best from two worlds: supervised optimal constraint
learning robust under the noise.

\begin{figure}[htb]
 \centering
 \includegraphics[width=0.7\textwidth]{noise_flashfill.png}
 \caption{We clearly see that FlashFill is highly sensitive to the
   noise (the figure is due to \cite{robustfill})}
  \label{fig:flashfill_noise}
\end{figure}

\begin{figure}[htb]
 \centering
 \includegraphics[width=0.7\textwidth]{setting.png}
 \caption{An example of a nested spreadsheet formula}
  \label{fig:nested_formula}
\end{figure}

\begin{figure}[htb]
 \centering
 \includegraphics[width=0.7\textwidth]{visualInterface.png}
 \caption{Possible visual interface for Pindakaas}
  \label{fig:visual_interface}
\end{figure}

\textbf{Key Ideas:}
  \begin{itemize}
    \item Use marked or ``supervised'' setting with $\bar x$ for input, $y$ for output
    \item Introduce the loss function $L$ between formula and output
    \item Search for the best fitting formula, i.e., $L(f(\bar x),y)$
    \item Penalize complexity with of a formula, i.e., $\mathcal{C}(f)$ is the measure of complexity
  \end{itemize}




\paragraph{Noise handling} FlashFill is highly sensitive to the noise,
see Figure \ref{fig:flashfill_noise},
and TaCle as well. If we want to make TaCLe robust to the noise, we also need to adapt a
statistical methodology. One way to do it is to introduce a loss
function that would measure how close is the formula to the target
output.

\paragraph{Nested formulae} TaCLe is only able to handle flat
formulae, if we want to extend it to the nested formulae, as for
example in Figure \ref{fig:nested_formula}, we need to
put preference of one formula over another. This can be done by means
of regularizing the formula complexity.

This can be achieved by introducing the following optimization
objective:

  \begin{equation*}
    f^* = \min_{f \in F}{L(f(\bar x),y) + \alpha \mathcal{C}(f)}
  \end{equation*}
  where $\alpha$ is a constant, like in SVM

\paragraph{How can we define complexity}
  \begin{itemize}
     \item for any flat formula $f$, it is a constant
       \begin{equation*}
         \mathcal{C}(f) = c_f 
       \end{equation*}
     \item for any nested formula 
       \begin{equation*}
       \mathcal{C}(f(g(x_1),h(x_2))) = \mathcal{C}(f) + \mathcal{C}(g) + \mathcal{C}(h)
       \end{equation*}
  \end{itemize}
  And the penalization constant $\alpha$ can be learned by cross-validation or set as a parameter

To better position Pindakass, let us contrast it with the features of
TaCLe and FlashFill in Table \ref{tab:pindakaas_features}.
\makesavenoteenv{tabular}
\begin{table}
  \begin{tabularx}{\textwidth}{l | X | X | X }
    \textbf{Property} & \textbf{FlashFill} & \textbf{TaCLe} &
    \textbf{Pindakaas} \\ \hline
    Data type & Text & Numeric and Textual &  Numeric and
    Textual\\\hline
    Learns & String transformation & Set of Flat Excel Formulae
    & Single best nested formula\\\hline
    Supervised & Marked columns + examples & Unsupervised &
    Marked columns \\\hline
    Solving & Structured search & Constraint enumeration &
    Regularized optimization \\\hline
    Satisfaction & Exact & Exact &  Best
    matching\\\hline
    Output & set of values & set of formulae & single
    formula\\ \hline
    Anytime & No & No & Yes
  \end{tabularx}
  \caption{Feature comparison between Pindakaas, TaCLe and FlashFill}
  \label{tab:pindakaas_features}
\end{table}



A possible visual interface is depicted in Figure \ref{fig:visual_interface}.

\subsection{Spreadsheet formula sketching}
Let us suggest a mix between TaCLe and ASP sketching:

\textbf{Problem:} a set of partially specified constraints (or formulae, equations), can we complete them given examples?
 
  Specification (for consistency, Excel-like)
  \begin{verbatim}
  B1 := ?F1(A1:A10)
  B2 := B1 ?+ ?F2(B1)
  B3 := if B2 ?= 10, then ?F3(B2)
                     else 42
  \end{verbatim}
  And examples:
  \begin{verbatim}
  positive: B1 = 4; B2 = 2; B3 = 42 
  negative: B1 = 1; B2 = 2; B3 =  3
  \end{verbatim}
  

  Completed specification that is consistent with the examples:
  \begin{Verbatim}[commandchars=\\\{\}]
  B1 := \textbf{SUM}(A1:A10)
  B2 := B1 \textbf{-} \textbf{SQRT}(B1)
  B3 := if B2 \textbf{>} 10, then B2\textbf{^2}
                    else 42
  \end{Verbatim}

This combines ideas from both \acrshort{skasp} and \acrshort{tacle}.
  

\section{Summary and Conclusions}
In the introduction chapter we have identified the key research
questions. Now we are going to review these questions and the analyze the answers provided in this thesis.

\begin{description}
\item[\cone] \textit{What are the challenges and advantages of generalizing
    classic data mining problems, such as the Boolean Matrix
  Factorization problem, into the relation setting?}
\end{description}

As we see in Chapter \ref{ch:ReDF}, the key advantage is the
generality and flexibility of the approach, however, it often comes at
the cost of longer runtimes of the method. There are a number of ways
as has been indicated to handle this problem but it should not come as
a surprise that general methods cannot compete out-of-the-box in the efficiency with
a specialized method devoted to only one particular problem. What is
also clear that specialized methods must be significantly modified in
order to be used in a new setting. Our extensive experimental study
also demonstrates that general relational methods are well-suited for
system prototyping.

\begin{description}
\item[\ctwo] \textit{What practical problems are intrinsically relational and
  how can they be modelled and used in practice?}
\end{description}

As has been shown in Chapter \ref{ch:TaCLe}, the problems related to
spreadsheet data are intrinsically relational, since the data itself
consists of multiple relations together with the dependencies between
them. We have introduced the system called \acrlong{tacle}, based on
classic \acrshort{ilp} ideas, to work in this setting. The systems
enumerates the Excel-like constraints by working on them in the same
manner as clause-learning systems do. It is able to detect the most
popular Excel function in the spreadsheet data as within a table as
well as between multiple tables.

\begin{description}
\item[\cthree] \textit{Looking at the inversed problem: given a relational
    model, can we mark some parts of its to be uncertain and in what
  setting would it be applicable?}
\end{description}

As we have demonstrated in Chapter \ref{ch:Sketching}, given a
partially complete specification of an ASP program, \acrshort{asp}
can successfully learn relational programs based a few examples
provided. We have extensively analyzed the learned programs and
discovered that on average only few between 2-5 examples needed to
converge to a correct solution. Furthermore, we were able to detect
errors in publicly available encodings, we have contacted the authors
and the models were updated.


\begin{description}
\item[\cfour]  \textit{Similarly to unstructured constraint-based itemset
    mining: can we apply declarative relational mining
    techniques to structured patter mining, such as sequence, graph
  and query mining?}
\end{description}

As indicated in Chapter \ref{ch:StructuredMining}, we have applied the
logic programming methods to the structured mining problems. We were
able to create a purely declarative model of graph mining. What we
have discovered is that the systems cannot yet handle this type of
models efficiently. As a result, we have proposed a hybrid model that
first applies a standard pattern mining algorithm and then uses a
logic programming engine. This has lead to an order of magnitude
efficiency jump and, from the practical point of view, it seems to be
the most fruitful direction of future research in declarative pattern
mining.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Keep the following \cleardoublepage at the end of this file, 
% otherwise \includeonly includes empty pages.
\cleardoublepage

% vim: tw=70 nocindent expandtab foldmethod=marker foldmarker={{{}{,}{}}}
